import e,{useReducer as t,useContext as n,useCallback as r,useEffect as o}from"react";import p from"@babel/runtime/helpers/taggedTemplateLiteral";import i from"styled-components";import c from"@babel/runtime/helpers/slicedToArray";import l from"@babel/runtime/helpers/toConsumableArray";import a from"@babel/runtime/helpers/defineProperty";var s=function(t){var n=t.children;return e.createElement("button",null,n)};function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m,f,b,E,S={steps:[],currentStep:0,stepsCompleted:[],stepMap:{}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0,n=e.currentStep,r=e.steps,o=e.stepMap,p=t.type,i=t.payload;switch(p){case"SET_STEPS":var c=i.steps.reduce((function(e,t,n){var r=t.id;return d(d({},e),{},a({},r,n))}),{});return d(d({},e),{},{steps:i.steps,stepMap:c});case"INCREMENT_CURRENT_STEP":return d(d({},e),{},{currentStep:n<r.length-1?n+1:n});case"DECREMENT_CURRENT_STEP":return d(d({},e),{},{currentStep:n>0?n-1:n});case"STEP_COMPLETED":return d(d({},e),{},{currentStep:n<r.length-1?n+1:n,stepsCompleted:[].concat(l(e.stepsCompleted),[i.step])});case"GO_TO_STEP":return d(d({},e),{},{currentStep:o[i.id]});default:return e}},y=e.createContext(),v=function(){var e=n(y),t=c(e,2),o=t[0],p=t[1],i=o.currentStep,l=o.steps,a=o.stepsCompleted;if(!y)throw new Error("useStepper should be used inside StepperProvider");var s=r((function(){p({type:"INCREMENT_CURRENT_STEP"})}),[p]),u=r((function(){p({type:"DECREMENT_CURRENT_STEP"})}),[p]),d=r((function(e){return p({type:"SET_STEPS",payload:{steps:e}})}),[p]),m=r((function(e){return p({type:"STEP_COMPLETED",payload:{step:e}})}),[p]);return{decrementCurrentStep:u,goToStep:r((function(e){return p({type:"GO_TO_STEP",payload:{id:e}})}),[p]),incrementCurrentStep:s,setStepCompleted:m,setSteps:d,currentStep:i,steps:l,checkStepCompleted:function(e){return a.includes(e)}}},g=i.div(m||(m=p(['\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  flex: 1;\n\n  .step-counter {\n    position: relative;\n    z-index: 5;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 35px;\n    height: 35px;\n    padding: 10px;\n    border-radius: 50%;\n    background: #ccc;\n    margin-bottom: 6px;\n  }\n\n  &::after {\n    position: absolute;\n    content: "";\n    border-bottom: 2px solid #ccc;\n    width: 100%;\n    top: 17px;\n    left: 50%;\n    z-index: 2;\n  }\n\n  &.completed {\n    .step-counter {\n      background-color: #4bb543;\n    }\n    &::before {\n      position: absolute;\n      content: "";\n      border-bottom: 2px solid #4bb543;\n      width: 100%;\n      top: 17px;\n      left: -50%;\n      z-index: 3;\n    }\n  }\n\n  &:first-child {\n    &::before {\n      content: none;\n    }\n  }\n\n  &:last-child {\n    &::after {\n      content: none;\n    }\n  }\n\n  @media (max-width: 768px) {\n    font-size: 12px;\n  }\n']))),T=i.div(f||(f=p(["\n  margin-top: auto;\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 20px;\n"]))),x=function(t){var n=t.children,r=v(),o=r.currentStep,p=r.goToStep,i=r.steps,c=r.checkStepCompleted;return e.createElement(C,null,e.createElement(T,null,i.length?i.map((function(t,n){return e.createElement(g,{key:t.id,className:o>=n||c(t.id)?"completed":"",onClick:function(){return p(t.id)}},e.createElement("div",{className:"step-counter"},c(t.id)?"Done":n+1),e.createElement("div",{className:"step-name"},t.name))})):null),e.createElement(O,null,n))};x.Step=function(t){var n=t.children;return e.createElement(e.Fragment,null,n)},x.Steps=function(t){var n=t.children,r=v(),p=r.currentStep,i=r.steps,c=r.setSteps;return o((function(){var t=e.Children.toArray(n).filter((function(e){return"StepperStep"===e.type.name})).map((function(e){return e.props}));c(t)}),[c]),e.createElement("div",null,n&&e.Children.map(n,(function(e){if(i.length)return e.props.id===i[p].id?e:null})))},x.Container=function(n){var r=n.children,o=t(h,S),p=c(o,2),i=p[0],l=p[1];return e.createElement(y.Provider,{value:[i,l]},r)};var C=i.div(b||(b=p(["\n  display: flex;\n  flex-direction: column;\n"]))),O=i.div(E||(E=p(["\n  padding: 50px 16px;\n"]))),P={Button:s,Stepper:x};export{P as default};
